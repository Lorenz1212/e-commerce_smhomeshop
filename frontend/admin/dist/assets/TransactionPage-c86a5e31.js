import{r as h,j as e,b as N,c as g,S as v,n as _,C as w,R as C,h as b,O as D,P as f}from"./index-47a86244.js";import{M as T}from"./ModalHandler-ad0ee9b4.js";import{D as S,A as O}from"./ActionsCell-25d0eec8.js";import{I as L}from"./ImageTitleCell-2b5fa3f1.js";import{T as p}from"./TitleBlockCell-e566ab16.js";import{S as A}from"./StatusCell-8960e5cb.js";import{C as x}from"./CurrencyText-dfd7429e.js";const c=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}),P=({data:i})=>{var o;const s=h.useMemo(()=>i,[i]);return s?e.jsx("div",{className:"container py-2 d-flex justify-content-center",children:e.jsxs("div",{className:"p-5 rounded-4 shadow-lg w-100",style:{maxWidth:"900px"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"fw-bold mb-1",children:"Invoice"}),e.jsxs("p",{className:"text-muted mb-0",children:["Order No: ",s.order_no]}),e.jsxs("p",{className:"text-muted",children:["Queue: ",s.queue_number??"—"]})]}),e.jsxs("div",{className:"text-end",children:[e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Date:"})," ",s.order_date]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Request Type:"})," ",s.request_type]}),e.jsx("span",{className:`badge bg-${s.status_format.color}`,children:s.status_format.title})]})]}),e.jsx("div",{className:"table-responsive mb-4",children:e.jsxs("table",{className:"table table-bordered align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{className:"text-center",children:"Qty"}),e.jsx("th",{className:"text-end",children:"Unit Price"}),e.jsx("th",{className:"text-end",children:"Subtotal"}),e.jsx("th",{children:"Add-ons"})]})}),e.jsx("tbody",{children:(o=s.products)==null?void 0:o.map((t,n)=>{var l;return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{className:"text-center",children:t.quantity}),e.jsx("td",{className:"text-end",children:c.format(t.unit_price)}),e.jsx("td",{className:"text-end",children:c.format(t.subtotal)}),e.jsx("td",{children:(l=t.addons)!=null&&l.length?e.jsx("ul",{className:"list-unstyled mb-0 small text-muted",children:t.addons.map((a,d)=>e.jsxs("li",{children:[a.name," — ",c.format(a.unit_price)," (",c.format(a.subtotal),")"]},d))}):"—"})]},n)})})]})}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsxs("div",{style:{minWidth:"300px"},children:[e.jsxs("div",{className:"d-flex justify-content-between py-3 fs-5 fw-bold",children:[e.jsx("span",{children:"TOTAL"}),e.jsx("span",{children:c.format(s.total_amount)})]}),e.jsxs("div",{className:"d-flex justify-content-between border-bottom py-2",children:[e.jsx("span",{children:"VAT AMOUNT"}),e.jsx("strong",{children:c.format(s.tax_amount??0)})]}),e.jsxs("div",{className:"d-flex justify-content-between border-bottom py-2",children:[e.jsx("span",{children:"VATABLE SALES"}),e.jsx("strong",{children:c.format(s.subtotal)})]})]})})]})}):e.jsx("div",{children:"Loading invoice..."})},k=({data:i,loading:s,pagination:o,sortColumn:t,sortDirection:n,onPageChange:l,onSortChange:a,onView:d,onSearchChange:j})=>{const u=[{title:"#",key:"row_number",sortable:!0},{title:"Orders",key:"order_no",render:r=>e.jsx(L,{mainTitle:r.customer_name,subTitle:r.order_no})},{title:"Order Date",key:"order_date_format",sortable:!0},{title:"Total Amount",key:"total_amount",render:r=>e.jsx(p,{mainTitle:e.jsx(x,{value:r.total_amount??0}),subTitle:[e.jsxs(e.Fragment,{children:["VAT AMOUNT: ",e.jsx(x,{value:r.tax_amount??0})]}),e.jsxs(e.Fragment,{children:["VATABLE SALES: ",e.jsx(x,{value:r.subtotal-r.tax_amount})]})]})},{title:"Status",key:"status_format",sortable:!0,render:r=>e.jsx(A,{color:r.status_format.color,title:r.status_format.title})},{title:"Action",key:"id_encrypted",render:r=>e.jsx(O,{openDetailsModal:()=>d(r.id_encrypted)})}];return e.jsx("div",{className:"table-responsive",children:s?e.jsx("div",{className:"alert alert-info",children:"Loading..."}):e.jsx(S,{data:i,columns:u,loading:s,pagination:o,sortColumn:t,sortDirection:n,onPageChange:l,onSortChange:a,onSearchChange:j})})},F=()=>{const{showLoader:i,hideLoader:s}=N();return{viewOrderDetails:async t=>{var n,l;try{return i(),(await g.get(`/admin/order/online/${t}/details`)).data}catch(a){return v.fire({icon:"error",title:(l=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:l.message}),null}finally{s()}}}},R=({title:i})=>{const s=_("/admin/order/online/list"),{viewOrderDetails:o}=F(),[t,n]=h.useState({visible:!1,title:"",body:e.jsx(e.Fragment,{}),className:"modal-xl",alignment:"centered"}),l=async a=>{const d=await o(a);d&&n({visible:!0,title:"View Receipt",body:e.jsx(P,{data:d}),className:"modal-xl",alignment:"centered"})};return e.jsx(e.Fragment,{children:e.jsxs(w,{children:[e.jsxs("div",{className:"card mb-5 mb-xl-8",children:[e.jsx("div",{className:"card-header border-0 pt-5",children:e.jsx("h3",{className:"card-title align-items-start flex-column",children:e.jsxs("span",{className:"card-label fw-bold fs-3 mb-1",children:[i,"s"]})})}),e.jsx("div",{className:"card-body py-3",children:e.jsx("div",{className:"table-responsive",children:e.jsx(k,{data:s.data,loading:s.loading,pagination:s.pagination,sortColumn:s.sortColumn,sortDirection:s.sortDirection,onPageChange:s.setPage,onSortChange:(a,d)=>{s.setSortColumn(a),s.setSortDirection(d)},onView:l,onSearchChange:a=>{s.setPage(1),s.setSearch(a)},setRefreshTable:s.setRefreshTable})})})]}),t.visible&&e.jsx(T,{title:t.title,body:t.body,modalClass:t.className,alignment:t.alignment,onClose:()=>n({visible:!1,title:"",body:e.jsx(e.Fragment,{}),className:"",alignment:"center"})})]})})},V=()=>{const{showLoader:i,hideLoader:s}=N();return{viewOrderDetails:async t=>{var n,l;try{return i(),(await g.get(`/admin/order/walkin/${t}/details`)).data}catch(a){return v.fire({icon:"error",title:(l=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:l.message}),null}finally{s()}}}},m=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}),M=({data:i})=>{var o;const s=h.useMemo(()=>i,[i]);return s?e.jsx("div",{className:"container py-2 d-flex justify-content-center",children:e.jsxs("div",{className:"p-5 rounded-4 shadow-lg w-100",style:{maxWidth:"900px"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"fw-bold mb-1",children:"Invoice"}),e.jsxs("p",{className:"text-muted mb-0",children:["Order No: ",s.order_no]}),e.jsxs("p",{className:"text-muted",children:["Queue: ",s.queue_number??"—"]})]}),e.jsxs("div",{className:"text-end",children:[e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Date:"})," ",s.order_date]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Request Type:"})," ",s.request_type]}),e.jsx("span",{className:`badge bg-${s.status_format.color}`,children:s.status_format.title})]})]}),e.jsx("div",{className:"table-responsive mb-4",children:e.jsxs("table",{className:"table table-bordered align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product"}),e.jsx("th",{className:"text-center",children:"Qty"}),e.jsx("th",{className:"text-end",children:"Unit Price"}),e.jsx("th",{className:"text-end",children:"Subtotal"}),e.jsx("th",{children:"Add-ons"})]})}),e.jsx("tbody",{children:(o=s.products)==null?void 0:o.map((t,n)=>{var l;return e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{className:"text-center",children:t.quantity}),e.jsx("td",{className:"text-end",children:m.format(t.unit_price)}),e.jsx("td",{className:"text-end",children:m.format(t.subtotal)}),e.jsx("td",{children:(l=t.addons)!=null&&l.length?e.jsx("ul",{className:"list-unstyled mb-0 small text-muted",children:t.addons.map((a,d)=>e.jsxs("li",{children:[a.name," — ",m.format(a.unit_price)," (",m.format(a.subtotal),")"]},d))}):"—"})]},n)})})]})}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsxs("div",{style:{minWidth:"300px"},children:[e.jsxs("div",{className:"d-flex justify-content-between py-3 fs-5 fw-bold",children:[e.jsx("span",{children:"TOTAL"}),e.jsx("span",{children:m.format(s.total_amount)})]}),e.jsxs("div",{className:"d-flex justify-content-between border-bottom py-2",children:[e.jsx("span",{children:"VAT AMOUNT"}),e.jsx("strong",{children:m.format(s.tax_amount??0)})]}),e.jsxs("div",{className:"d-flex justify-content-between border-bottom py-2",children:[e.jsx("span",{children:"VATABLE SALES"}),e.jsx("strong",{children:m.format(s.subtotal)})]})]})})]})}):e.jsx("div",{children:"Loading invoice..."})},E=({data:i,loading:s,pagination:o,sortColumn:t,sortDirection:n,onPageChange:l,onSortChange:a,onView:d,onSearchChange:j})=>{const u=[{title:"#",key:"row_number",sortable:!0},{title:"Orders",key:"order_no",render:r=>e.jsx(p,{subTitle:r.order_no})},{title:"Order Date",key:"order_date_format",sortable:!0},{title:"Total Amount",key:"total_amount",render:r=>e.jsx(p,{mainTitle:e.jsx(x,{value:r.total_amount??0}),subTitle:[e.jsxs(e.Fragment,{children:["VAT AMOUNT: ",e.jsx(x,{value:r.tax_amount??0})]}),e.jsxs(e.Fragment,{children:["VATABLE SALES: ",e.jsx(x,{value:r.subtotal-r.tax_amount})]})]})},{title:"Status",key:"status_format",sortable:!0,render:r=>e.jsx(A,{color:r.status_format.color,title:r.status_format.title})},{title:"Action",key:"id_encrypted",render:r=>e.jsx(O,{openDetailsModal:()=>d(r.id_encrypted)})}];return e.jsx("div",{className:"table-responsive",children:s?e.jsx("div",{className:"alert alert-info",children:"Loading..."}):e.jsx(S,{data:i,columns:u,loading:s,pagination:o,sortColumn:t,sortDirection:n,onPageChange:l,onSortChange:a,onSearchChange:j})})},I=({title:i})=>{const s=_("/admin/order/walkin/list"),{viewOrderDetails:o}=V(),[t,n]=h.useState({visible:!1,title:"",body:e.jsx(e.Fragment,{}),className:"modal-xl",alignment:"centered"}),l=async a=>{const d=await o(a);d&&n({visible:!0,title:"View Invoice",body:e.jsx(M,{data:d}),className:"modal-xl",alignment:"centered"})};return e.jsx(e.Fragment,{children:e.jsxs(w,{children:[e.jsxs("div",{className:"card mb-5 mb-xl-8",children:[e.jsx("div",{className:"card-header border-0 pt-5",children:e.jsx("h3",{className:"card-title align-items-start flex-column",children:e.jsx("span",{className:"card-label fw-bold fs-3 mb-1",children:i})})}),e.jsx("div",{className:"card-body py-3",children:e.jsx("div",{className:"table-responsive",children:e.jsx(E,{data:s.data,loading:s.loading,pagination:s.pagination,sortColumn:s.sortColumn,sortDirection:s.sortDirection,onPageChange:s.setPage,onSortChange:(a,d)=>{s.setSortColumn(a),s.setSortDirection(d)},onView:l,onSearchChange:a=>{s.setPage(1),s.setSearch(a)},setRefreshTable:s.setRefreshTable})})})]}),t.visible&&e.jsx(T,{title:t.title,body:t.body,modalClass:t.className,alignment:t.alignment,onClose:()=>n({visible:!1,title:"",body:e.jsx(e.Fragment,{}),className:"",alignment:"center"})})]})})},y=[{title:"Transactions",path:"/transactions",isSeparator:!1,isActive:!1}],z=()=>e.jsx(C,{children:e.jsxs(b,{element:e.jsx(D,{}),children:[e.jsx(b,{path:"/online/order/list",element:e.jsxs(e.Fragment,{children:[e.jsx(f,{breadcrumbs:y,children:"Online Order"}),e.jsx(R,{title:"Online Order"})]})}),e.jsx(b,{path:"/walkin/order/list",element:e.jsxs(e.Fragment,{children:[e.jsx(f,{breadcrumbs:y,children:"In-Store Order"}),e.jsx(I,{title:"In-Store Order"})]})})]})});export{z as default};
